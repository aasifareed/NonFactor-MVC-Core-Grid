@model IQueryable<FinalMVC6Grid.Models.EmployeeViewModel>
@using System;
@using NonFactors.Mvc.Grid;
@{
    ViewData["Title"] = "Home Page";
}

@{
    List<SelectListItem> selectListItems = new List<SelectListItem>();
    selectListItems = ViewBag.EmployeeStatusList;
}
<link href="~/css/mvc-grid/mvc-grid.css" rel="stylesheet" />
<br />
<br />
<br />
@(Html
    .Grid(Model)
    .Build(columns =>
    {
        columns.Add(model => model.Name).Titled("Name");
        columns.Add(model => model.Email).Titled("Email Address");
        columns.Add(model => model.DateOfBirth).Titled("Date of Birth").Formatted("{0:d}").Filterable(GridFilterType.Double);
        columns.Add(model => model.EmployeeStatus).Titled("Employee Status").UsingFilterOptions(selectListItems
        ).Filterable(GridFilterType.Multi);

    })
    .Empty("No data found")
    .Filterable()
    .Sortable()
    .Pageable()
)
<script src="~/js/mvc-grid/mvc-grid.js"></script>
<script>

    class MvcGridTextFilter extends MvcGridFilter {
        constructor(column) {
            super(column);

            this.cssClasses = "mvc-grid-text-filter";
            if (column.name == "Name") {
                this.methods = ["equals", "not-equals"];
            } else if (column.name == "Email") {
                this.methods = ["contains"];
            } else {
                this.methods = ["contains", "equals", "not-equals", "starts-with", "ends-with"];
            }

        }
    }

    class MvcGridDateFilter extends MvcGridFilter {
        constructor(column) {
            super(column);

            this.cssClasses = "mvc-grid-date-filter";
            if (column.name == "DateOfBirth") {
                this.methods = ["later-than-or-equal", "earlier-than-or-equal"];
            } else {
                this.methods = ["equals", "not-equals", "earlier-than", "later-than", "earlier-than-or-equal", "later-than-or-equal"];
            }

        }
    }

</script>
